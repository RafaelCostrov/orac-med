{% extends "base.html"%}

{% block titleCss %}
<title>Minha Conta - Orac</title>
<link rel="stylesheet" href="{{url_for('static', filename='/css/conta.css')}}" />
{% endblock titleCss %}

{% block body %}
<!-- Conteúdo principal -->
<main>
  <h1>Minha Conta</h1>

  <form id="form-conta" autocomplete="off" class="conta-form">
    <!-- Foto de Perfil -->
    <div class="avatar-box">
      <label for="foto">
        <img id="avatar-preview" src="{{link}}" alt="Foto de perfil" data-foto="{{link}}" />
      </label>
      <input type="file" id="foto" accept="image/*" hidden />
    </div>

    <!-- Nome -->
    <div class="form-group">
      <label for="nome">ID usuário</label>
      <input type="text" id="id_usuario" data-id="{{ id_usuario }}" disabled required />
    </div>

    <!-- Nome -->
    <div class="form-group">
      <label for="nome">Nome completo</label>
      <input type="text" id="nome" placeholder="Digite seu nome" data-username="{{ username }}" disabled required />
    </div>

    <!-- E-mail (somente leitura) -->
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email" id="email" placeholder="E-mail" data-email="{{ email }}" disabled required />
    </div>

    <!-- Segurança -->
    <section class="seguranca">
      <h2>Segurança</h2>

      <!-- Tile/linha clicável para abrir o modal -->
      <button type="button" id="openChangePwd" class="pwd-tile" aria-haspopup="dialog" aria-controls="modalSenha">
        <svg class="lock-ic" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor"
            d="M12 1a6 6 0 0 1 6 6v3h1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h1V7a6 6 0 0 1 6-6zm0 2a4 4 0 0 0-4 4v3h8V7a4 4 0 0 0-4-4z" />
        </svg>
        <span>Alterar senha</span>
      </button>
    </section>

    <!-- Botão salvar (dados da conta) -->
    <div class="form-buttons">
      <button type="submit" class="btn-cancelar disabled" id="cancelar" disabled>Cancelar</button>
      <button type="submit" class="btn-salvar" id="editar">Editar</button>
    </div>
  </form>
</main>

<!-- Modal Alterar Senha -->
<div id="modalSenha" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal__backdrop">
    <div class="modal__dialog modal-lg" role="document">
      <header class="modal__header">
        <h2>Alterar senha</h2>
        <button class="modal__close" type="button" data-close aria-label="Fechar">&times;</button>
      </header>

      <div class="modal__body">
        <div class="grid filtros-grid">
          <!-- Lembrete -->
          <aside class="pwd-tips">
            <h3>Lembre-se:</h3>
            <ul class="requisitos">
              <li>
                <img src="{{url_for('static', filename='/img/icons/info.png')}}" class="info-ic" alt=""
                  aria-hidden="true">
                <span>No mínimo 8 caracteres</span>
              </li>
              <li>
                <img src="{{url_for('static', filename='/img/icons/info.png')}}" class="info-ic" alt=""
                  aria-hidden="true">
                <span>Pelo menos 1 letra minúscula</span>
              </li>
              <li>
                <img src="{{url_for('static', filename='/img/icons/info.png')}}" class="info-ic" alt=""
                  aria-hidden="true">
                <span>Pelo menos 1 letra maiúscula</span>
              </li>
              <li>
                <img src="{{url_for('static', filename='/img/icons/info.png')}}" class="info-ic" alt=""
                  aria-hidden="true">
                <span>Pelo menos 1 número</span>
              </li>
              <li>
                <img src="{{url_for('static', filename='/img/icons/info.png')}}" class="info-ic" alt=""
                  aria-hidden="true">
                <span>Pelo menos 1 caractere especial</span>
              </li>
            </ul>
          </aside>

          <!-- Form Senha -->
          <form id="formSenha" class="pwd-form" autocomplete="off">

            <div class="form-row">
              <label for="pwdNova">Nova senha</label>
              <div class="pwd-field">
                <img class="icon-left" src="{{url_for('static', filename='/img/icons/cadeado.png')}}" alt=""
                  aria-hidden="true">
                <input id="pwdNova" type="password" autocomplete="new-password" />
                <button type="button" class="toggle-pass" aria-label="Mostrar senha" aria-pressed="false"
                  data-target="#pwdNova">
                  <img class="eye eye-open" src="{{url_for('static', filename='/img/icons/view.png')}}" alt="">
                  <img class="eye eye-closed" src="{{url_for('static', filename='/img/icons/hide.png')}}" alt="">
                </button>
              </div>
              <div class="pwd-meter">
                <div class="bar" id="pwdBar"></div>
              </div>
            </div>

            <div class="form-row">
              <label for="pwdConfirma">Confirme a nova senha</label>
              <div class="pwd-field">
                <img class="icon-left" src="{{url_for('static', filename='/img/icons/cadeado.png')}}" alt=""
                  aria-hidden="true">
                <input id="pwdConfirma" type="password" autocomplete="new-password" />
                <button type="button" class="toggle-pass" aria-label="Mostrar senha" aria-pressed="false"
                  data-target="#pwdConfirma">
                  <img class="eye eye-open" src="{{url_for('static', filename='/img/icons/view.png')}}" alt="">
                  <img class="eye eye-closed" src="{{url_for('static', filename='/img/icons/hide.png')}}" alt="">
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="modal__footer">
        <button class="btn cinza" id="btnCancelarSenha" type="button">Voltar</button>
        <button class="btn verde" form="formSenha" id="salvarSenha" type="submit">Alterar Senha</button>
      </div>
    </div>
  </div>
</div>

<div id="loading-overlay" class="uk-position-fixed uk-position-cover uk-flex uk-flex-center uk-flex-middle"
  style="background: rgba(0,0,0,0.5); display: none; z-index: 9999;">
  <div uk-spinner="ratio: 3"></div>
</div>


{% endblock body %}

{% block scripts %}
<script src="{{url_for('static', filename='/js/conta.js')}} " defer></script>
<script src="{{url_for('static', filename='/js/conta/conta.js')}} " defer></script>
{% endblock scripts %}